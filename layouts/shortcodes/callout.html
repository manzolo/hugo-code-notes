{{- $type := .Get "type" | default "info" -}}
{{- $title := .Get "title" | default "" -}}

{{- $icons := dict 
    "info" "‚ÑπÔ∏è"
    "tip" "üí°"
    "warning" "‚ö†Ô∏è"
    "danger" "üö®"
    "note" "üìù"
    "success" "‚úÖ"
    "error" "‚ùå"
-}}

{{- $colors := dict 
    "info" "blue"
    "tip" "green"
    "warning" "yellow"
    "danger" "red"
    "note" "purple"
    "success" "green"
    "error" "red"
-}}

{{- $icon := index $icons $type | default "‚ÑπÔ∏è" -}}
{{- $color := index $colors $type | default "blue" -}}

<div class="callout callout--{{ $color }}" role="alert">
  <div class="callout-header">
    <span class="callout-icon">{{ $icon }}</span>
    {{- if $title -}}
    <span class="callout-title">{{ $title }}</span>
    {{- else -}}
    <span class="callout-title">{{ $type | title }}</span>
    {{- end -}}
  </div>
  <div class="callout-content">
    {{ .Inner | markdownify }}
  </div>
</div>

<style>
.callout {
  margin: 1.5rem 0;
  padding: 1rem;
  border-radius: 8px;
  border-left: 4px solid;
  background-color: var(--callout-bg);
  border-color: var(--callout-border);
}

.callout-header {
  display: flex;
  align-items: center;
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.callout-icon {
  margin-right: 0.5rem;
  font-size: 1.1em;
}

.callout-title {
  text-transform: uppercase;
  font-size: 0.85em;
  letter-spacing: 0.5px;
}

.callout-content {
  margin: 0;
}

.callout-content p:last-child {
  margin-bottom: 0;
}

/* Tema chiaro */
:root {
  --callout-blue-bg: #e3f2fd;
  --callout-blue-border: #2196f3;
  --callout-green-bg: #e8f5e8;
  --callout-green-border: #4caf50;
  --callout-yellow-bg: #fff8e1;
  --callout-yellow-border: #ff9800;
  --callout-red-bg: #ffebee;
  --callout-red-border: #f44336;
  --callout-purple-bg: #f3e5f5;
  --callout-purple-border: #9c27b0;
}

/* Tema scuro */
[data-theme="dark"] {
  --callout-blue-bg: #1a2942;
  --callout-blue-border: #64b5f6;
  --callout-blue-text: #90caf9;
  --callout-green-bg: #1b3a2f;
  --callout-green-border: #66bb6a;
  --callout-green-text: #81c784;
  --callout-yellow-bg: #3a3420;
  --callout-yellow-border: #c9b382;
  --callout-yellow-text: #e8d7a8;
  --callout-red-bg: #2d2020;
  --callout-red-border: #d48888;
  --callout-red-text: #e6a8a8;
  --callout-purple-bg: #2d1b4e;
  --callout-purple-border: #ba68c8;
  --callout-purple-text: #ce93d8;
}

.callout--blue {
  --callout-bg: var(--callout-blue-bg);
  --callout-border: var(--callout-blue-border);
  color: var(--callout-blue-border);
}

.callout--green {
  --callout-bg: var(--callout-green-bg);
  --callout-border: var(--callout-green-border);
  color: var(--callout-green-border);
}

.callout--yellow {
  --callout-bg: var(--callout-yellow-bg);
  --callout-border: var(--callout-yellow-border);
  color: var(--callout-yellow-border);
}

.callout--red {
  --callout-bg: var(--callout-red-bg);
  --callout-border: var(--callout-red-border);
  color: var(--callout-red-border);
}

.callout--purple {
  --callout-bg: var(--callout-purple-bg);
  --callout-border: var(--callout-purple-border);
  color: var(--callout-purple-border);
}

/* Text colors for dark theme */
[data-theme="dark"] .callout--blue {
  color: var(--callout-blue-text);
}

[data-theme="dark"] .callout--green {
  color: var(--callout-green-text);
}

[data-theme="dark"] .callout--yellow {
  color: var(--callout-yellow-text);
}

[data-theme="dark"] .callout--red {
  color: var(--callout-red-text);
}

[data-theme="dark"] .callout--purple {
  color: var(--callout-purple-text);
}

/* Responsive */
@media (max-width: 768px) {
  .callout {
    margin: 1rem -1rem;
    border-radius: 0;
    padding: 1rem;
  }
}
</style>